[TOC]

# HBase概述

![123.background](01Modulepics/123.background.png)

适合半结构数据存储

![124.History](01Modulepics/124.History.png)

**HBase也是Hadoop的一部分**

![125.HadoopHBase](01Modulepics/125.HadoopHBase.png)

**分布式数据库**

<img src="01Modulepics/126.DistributedDatabase.png" alt="126.DistributedDatabase" style="zoom:75%;" />

**分布式数据库的特点**
从集中式数据库走向分布式数据库

![127.Features](01Modulepics/127.Features.png)

**BigTable**
HBase的原型是谷歌的分布式存储系统 BigTable，是谷歌 BigTable的开源实现

**HBase是完美的分布式数据库吗？**

- 分布式数据库首先得是一个数据库
- 分布式数据库无法逃开CAP理论
- 分布式数据库的一些特征：
  - 数据分布式存储
  - Consistency
  - 行级事务管理
  - 水平拓展性好
  - 支持标准SQL
  - 数据一致性（强，最终）
  - 事务透明性
  - 两阶段提及

**当MySQL单表数据量暴涨时怎么办？**

**什么是分片分组**

![128.ShardGrouping](01Modulepics/128.ShardGrouping.png)



**什么是分库分表**
**分表：分表从表面意思说就是把一张表分成多个小表**
关系型数据库在大于一定数据量的情况下检索性能会急剧下降。在面对互联网海量数据情况时，所有数据都存于一张表，显然会轻易超过数据库表可承受的数据量阈值。这个单表可承受的数据量阈值，需根据数据库和并发量的差异，通过实际测试获得。
**分库：**
单纯的分表虽然可以解决数据量过大导致检索变慢的问题，但无法解决过多并发请求访问同一个库，导致数据库响应变慢的问题。所以通常水平拆分都至少要采用分库的方式，用于一并解决大数据量和高并发的问题。这也是部分开源的分片数据库中间件只支持分库的原因。
**分库分表带来的问题？**
**分布式事务：**
但分表也有不可替代的适用场景。最常见的分表需求是事务问题。同在一个库则不需考虑分布式事务，善于使用同库不同表可有效避免分布式事务带来的麻烦。目前强一致性的分布式事务由于性能问题，导致使用起来并不一定比不分库分表快。目前采用最终一致性的柔性事务居多。
**跨库跨表的join问题：**
原本一次查询能够完成的业务，可能需要多次查询才能完成

## Google的分布式数据库之路

- 阶段一：BigTable
  - 实现了数据的分布式存储、行数据的事务性管理和较好的扩展性，从存储WEB页面而生，创造性提出了KEY-VALUE这种MAP数据结构，对应开源社区的HBASE。
- 阶段二：Dremel
  - Dremel产品采用了与Bigtable不同的数据结构，立足实时对于海量数据进行分析，据说在秒级可以完成PB级别的数据分析和处理，可以做是分布式数据库实时处理的杰作。
- 阶段三：Spanner
  - Spanner数据库在可以做到多数据表事务一致性管理，利用原子时钟（TrueTime）和Paxos协议解决了分布式数据库多表事务一致性管理的难题，打破的CAP理论神话，使得分布式数据库技术得到了革命性的进步。

## HBase和RDBMS的不同

![129.HBaseVSRDBMS](01Modulepics/129.HBaseVSRDBMS.png)





































































































































